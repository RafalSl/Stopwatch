package stopwatch;

import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.concurrent.Executor;
import java.util.concurrent.Executors;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingConstants;
import javax.swing.Timer;

public class Controller implements ActionListener, Runnable {
		private View window;
		private Model licznik;
		private Executor exec;
		private Timer timer;
		
		public Controller() {
			window = new View();
			licznik = new Model();
			exec = Executors.newCachedThreadPool();
			exec.execute(licznik);
			timer = new Timer(30, new ActionListener() {
	            public void actionPerformed(ActionEvent evt) {
	                if (licznik.isGo()){
	/*                	if(licznik.getHours() == 0) timeCounter.setText(licznik.getMinutes() + ":" + licznik.getSeconds() + "," + licznik.getMiliSeconds());
	                	else timeCounter.setText(licznik.getHours()+ ":" + licznik.getMinutes() + ":" + licznik.getSeconds() + "," + licznik.getMiliSeconds());*/
	                	window.getTimeCounter().setText(licznik.getElapsedTime());
	                	window.getTimeCounter().repaint();	                
	                } 
	            }
	        });
		}
		
		
		@Override
		public void actionPerformed(ActionEvent e) {
			if (e.getSource().equals(window.getStart())) {				
				if (licznik.isGo()){
					licznik.setGo(false);
					window.getStart().setText("Start");
					timer.stop();
				}
				else {
					exec.execute(licznik);
					licznik.setZero();
					licznik.setGo(true);	
					window.getStart().setText("Stop");
					timer.start();			
				}
			}
		}


		@Override
		public void run() {
			// TODO Auto-generated method stub
			
		}


}
